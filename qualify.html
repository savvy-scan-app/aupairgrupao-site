<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acesso Antecipado - AuPair GrupÃ£o</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#F06179',
                        secondary: '#4A9CE8',
                        accent: '#30BFB2',
                        error: '#E13D45',
                        success: '#21A666',
                        subtle: '#F5EBE1',
                    },
                    borderRadius: {
                        'xl': '14px',
                        '2xl': '20px',
                        '3xl': '28px',
                    },
                    boxShadow: {
                        'soft': '0 4px 14px rgba(0, 0, 0, 0.08)',
                        'soft-lg': '0 8px 24px rgba(0, 0, 0, 0.10)',
                    }
                }
            }
        }
    </script>
    <!-- Supabase JS Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <meta name="description" content="Verifique se vocÃª qualifica para acesso antecipado ao AuPair GrupÃ£o">
</head>
<body class="bg-gradient-to-br from-primary/10 to-secondary/10 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-soft">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-2">
                    <a href="index.html" class="text-2xl font-bold text-primary">AuPair GrupÃ£o</a>
                </div>
                <div class="hidden md:flex space-x-6">
                    <a href="index.html" class="text-gray-700 hover:text-primary transition">InÃ­cio</a>
                    <a href="support.html" class="text-gray-700 hover:text-primary transition">Suporte</a>
                    <a href="privacy.html" class="text-gray-700 hover:text-primary transition">Privacidade</a>
                    <a href="terms.html" class="text-gray-700 hover:text-primary transition">Termos</a>
                </div>
                <!-- Mobile menu button -->
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <!-- Mobile menu -->
            <div id="mobile-menu" class="hidden md:hidden pb-4">
                <a href="index.html" class="block py-2 text-gray-700 hover:text-primary">InÃ­cio</a>
                <a href="support.html" class="block py-2 text-gray-700 hover:text-primary">Suporte</a>
                <a href="privacy.html" class="block py-2 text-gray-700 hover:text-primary">Privacidade</a>
                <a href="terms.html" class="block py-2 text-gray-700 hover:text-primary">Termos</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-2xl mx-auto px-4 py-12">

        <!-- Form Section -->
        <div id="form-section">
            <div class="text-center mb-8">
                <div class="w-16 h-16 bg-primary rounded-full flex items-center justify-center mb-4 mx-auto shadow-soft">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <h1 class="text-3xl font-bold text-gray-800 mb-2">Quer acesso antecipado?</h1>
                <p class="text-gray-600">Responda algumas perguntas para verificar se vocÃª qualifica para o grupo beta.</p>
            </div>

            <form id="qualification-form" class="bg-white rounded-3xl shadow-soft-lg p-6 md:p-8 border border-gray-100 space-y-6">

                <!-- Question 1: Status -->
                <div class="space-y-3">
                    <label class="block text-lg font-semibold text-gray-800">1. Qual Ã© o seu status?</label>
                    <div class="space-y-2">
                        <label class="flex items-center p-4 border border-gray-200 rounded-2xl cursor-pointer hover:border-primary hover:bg-primary/5 transition">
                            <input type="radio" name="status" value="aupair" class="w-5 h-5 text-primary focus:ring-primary" required>
                            <span class="ml-3 text-gray-700">Au Pair</span>
                        </label>
                        <label class="flex items-center p-4 border border-gray-200 rounded-2xl cursor-pointer hover:border-primary hover:bg-primary/5 transition">
                            <input type="radio" name="status" value="former_aupair" class="w-5 h-5 text-primary focus:ring-primary">
                            <span class="ml-3 text-gray-700">Former Au Pair</span>
                        </label>
                        <label class="flex items-center p-4 border border-gray-200 rounded-2xl cursor-pointer hover:border-primary hover:bg-primary/5 transition">
                            <input type="radio" name="status" value="futura_aupair" class="w-5 h-5 text-primary focus:ring-primary">
                            <span class="ml-3 text-gray-700">Futura Au Pair</span>
                        </label>
                    </div>
                </div>

                <!-- Question 2: Device -->
                <div class="space-y-3">
                    <label class="block text-lg font-semibold text-gray-800">2. Qual dispositivo vocÃª usa?</label>
                    <div class="space-y-2">
                        <label class="flex items-center p-4 border border-gray-200 rounded-2xl cursor-pointer hover:border-primary hover:bg-primary/5 transition">
                            <input type="radio" name="device" value="ios" class="w-5 h-5 text-primary focus:ring-primary" required>
                            <span class="ml-3 text-gray-700">iOS (iPhone/iPad)</span>
                        </label>
                        <label class="flex items-center p-4 border border-gray-200 rounded-2xl cursor-pointer hover:border-primary hover:bg-primary/5 transition">
                            <input type="radio" name="device" value="android" class="w-5 h-5 text-primary focus:ring-primary">
                            <span class="ml-3 text-gray-700">Android</span>
                        </label>
                    </div>
                </div>

                <!-- Question 3: Time as Au Pair -->
                <div class="space-y-3">
                    <label class="block text-lg font-semibold text-gray-800">3. HÃ¡ quanto tempo vocÃª Ã© Au Pair?</label>
                    <div class="space-y-2">
                        <label class="flex items-center p-4 border border-gray-200 rounded-2xl cursor-pointer hover:border-primary hover:bg-primary/5 transition">
                            <input type="radio" name="time_as_aupair" value="3-6_meses" class="w-5 h-5 text-primary focus:ring-primary" required>
                            <span class="ml-3 text-gray-700">3-6 meses</span>
                        </label>
                        <label class="flex items-center p-4 border border-gray-200 rounded-2xl cursor-pointer hover:border-primary hover:bg-primary/5 transition">
                            <input type="radio" name="time_as_aupair" value="1_ano" class="w-5 h-5 text-primary focus:ring-primary">
                            <span class="ml-3 text-gray-700">1 ano</span>
                        </label>
                        <label class="flex items-center p-4 border border-gray-200 rounded-2xl cursor-pointer hover:border-primary hover:bg-primary/5 transition">
                            <input type="radio" name="time_as_aupair" value="menos_2_anos" class="w-5 h-5 text-primary focus:ring-primary">
                            <span class="ml-3 text-gray-700">Menos de 2 anos</span>
                        </label>
                        <label class="flex items-center p-4 border border-gray-200 rounded-2xl cursor-pointer hover:border-primary hover:bg-primary/5 transition">
                            <input type="radio" name="time_as_aupair" value="nao_mais" class="w-5 h-5 text-primary focus:ring-primary">
                            <span class="ml-3 text-gray-700">NÃ£o sou mais Au Pair</span>
                        </label>
                    </div>
                </div>

                <!-- Question 4: First Name -->
                <div class="space-y-3">
                    <label class="block text-lg font-semibold text-gray-800">4. Seu primeiro nome</label>
                    <input
                        type="text"
                        name="first_name"
                        id="first_name"
                        placeholder="Ex: Maria"
                        class="w-full p-4 border border-gray-200 rounded-2xl focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition text-gray-700"
                        required
                    >
                </div>

                <!-- Question 5: WhatsApp -->
                <div class="space-y-3">
                    <label class="block text-lg font-semibold text-gray-800">5. Seu WhatsApp</label>
                    <div class="flex gap-2">
                        <select
                            id="country-code"
                            class="p-4 border border-gray-200 rounded-2xl focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition text-gray-700 bg-white"
                        >
                            <option value="+55">ðŸ‡§ðŸ‡· +55</option>
                            <option value="+1">ðŸ‡ºðŸ‡¸ +1</option>
                        </select>
                        <input
                            type="tel"
                            name="whatsapp"
                            id="whatsapp"
                            placeholder="11 99999-9999"
                            class="flex-1 p-4 border border-gray-200 rounded-2xl focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition text-gray-700"
                            required
                        >
                    </div>
                </div>

                <!-- Consent Checkbox -->
                <div class="space-y-3">
                    <label class="flex items-start gap-3 cursor-pointer">
                        <input
                            type="checkbox"
                            name="consent"
                            id="consent"
                            class="w-5 h-5 mt-0.5 text-primary focus:ring-primary rounded border-gray-300"
                            required
                        >
                        <span class="text-sm text-gray-600">
                            Concordo em receber comunicaÃ§Ãµes do AuPair GrupÃ£o pelo WhatsApp sobre o app e novidades.
                            Seus dados serÃ£o tratados conforme nossa <a href="privacy.html" target="_blank" class="text-primary hover:underline">PolÃ­tica de Privacidade</a>.
                        </span>
                    </label>
                </div>

                <!-- Submit Button -->
                <button
                    type="submit"
                    id="submit-btn"
                    class="w-full bg-primary text-white py-4 rounded-2xl font-semibold hover:bg-primary/90 transition shadow-soft text-lg"
                >
                    AvanÃ§ar
                </button>
            </form>
        </div>

        <!-- Loading Section (hidden by default) -->
        <div id="loading-section" class="hidden">
            <div class="bg-white rounded-3xl shadow-soft-lg p-8 md:p-12 border border-gray-100 text-center">
                <div class="w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-6"></div>
                <p class="text-gray-600 text-lg">Processando...</p>
            </div>
        </div>

    </div>

    <!-- Footer -->
    <footer class="bg-white mt-16 border-t border-gray-100">
        <div class="max-w-6xl mx-auto px-4 py-8">
            <div class="text-center text-gray-600">
                <p class="mb-2">&copy; 2025 AuPair GrupÃ£o. Todos os direitos reservados.</p>
                <div class="flex justify-center space-x-4 text-sm">
                    <a href="privacy.html" class="hover:text-primary transition">Privacidade</a>
                    <span>â€¢</span>
                    <a href="terms.html" class="hover:text-primary transition">Termos</a>
                    <span>â€¢</span>
                    <a href="support.html" class="hover:text-primary transition">Suporte</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Supabase configuration
        const SUPABASE_URL = 'https://kcijzezboxngwnhnlvtu.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtjaWp6ZXpib3huZ3duaG5sdnR1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQxODY5NDksImV4cCI6MjA3OTc2Mjk0OX0.RFgiNJaehpqbX-ytFD1ozUTYoUYrmHMsUmkqvw1dslc';

        const { createClient } = supabase;
        const supabaseClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // Form elements
        const form = document.getElementById('qualification-form');
        const formSection = document.getElementById('form-section');
        const loadingSection = document.getElementById('loading-section');

        // Phone mask for WhatsApp field
        const whatsappInput = document.getElementById('whatsapp');
        const countryCodeSelect = document.getElementById('country-code');

        function formatPhoneNumber(value, countryCode) {
            const digits = value.replace(/\D/g, '');

            if (countryCode === '+55') {
                // Brazilian format: XX XXXXX-XXXX
                if (digits.length <= 2) {
                    return digits;
                } else if (digits.length <= 7) {
                    return digits.slice(0, 2) + ' ' + digits.slice(2);
                } else {
                    return digits.slice(0, 2) + ' ' + digits.slice(2, 7) + '-' + digits.slice(7, 11);
                }
            } else {
                // US format: XXX XXX-XXXX
                if (digits.length <= 3) {
                    return digits;
                } else if (digits.length <= 6) {
                    return digits.slice(0, 3) + ' ' + digits.slice(3);
                } else {
                    return digits.slice(0, 3) + ' ' + digits.slice(3, 6) + '-' + digits.slice(6, 10);
                }
            }
        }

        function updatePlaceholder() {
            const countryCode = countryCodeSelect.value;
            whatsappInput.placeholder = countryCode === '+55' ? '11 99999-9999' : '555 123-4567';
        }

        whatsappInput.addEventListener('input', (e) => {
            e.target.value = formatPhoneNumber(e.target.value, countryCodeSelect.value);
        });

        countryCodeSelect.addEventListener('change', () => {
            updatePlaceholder();
            whatsappInput.value = formatPhoneNumber(whatsappInput.value, countryCodeSelect.value);
        });

        // Check if user qualifies
        function checkQualification(status, device, timeAsAupair) {
            const isAupair = status === 'aupair';
            const isIOS = device === 'ios';
            const validTime = ['3-6_meses', '1_ano', 'menos_2_anos'].includes(timeAsAupair);

            return isAupair && isIOS && validTime;
        }

        // Form submission
        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const formData = new FormData(form);
            const firstName = formData.get('first_name');
            const status = formData.get('status');
            const device = formData.get('device');
            const timeAsAupair = formData.get('time_as_aupair');
            const countryCode = countryCodeSelect.value;
            const phoneNumber = formData.get('whatsapp');
            const whatsapp = countryCode + ' ' + phoneNumber;

            const qualified = checkQualification(status, device, timeAsAupair);

            // Show loading
            formSection.classList.add('hidden');
            loadingSection.classList.remove('hidden');

            try {
                // Save lead to Supabase
                const { error } = await supabaseClient
                    .from('website_leads')
                    .insert([{
                        first_name: firstName,
                        whatsapp: whatsapp,
                        status: status,
                        device: device,
                        time_as_aupair: timeAsAupair,
                        qualified: qualified
                    }]);

                if (error) {
                    console.error('Error saving lead:', error);
                }
            } catch (err) {
                console.error('Error:', err);
            }

            // Redirect to appropriate page
            setTimeout(() => {
                if (qualified) {
                    window.location.href = 'qualify-success.html';
                } else {
                    window.location.href = 'qualify-thanks.html';
                }
            }, 1000);
        });
    </script>
</body>
</html>
